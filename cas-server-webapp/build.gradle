
apply plugin: 'war'

description = 'Apereo CAS Web Application'
dependencies {
	compile project(':cas-server-webapp-support')
	compile project(':cas-server-core')
	compile project(':cas-server-core-monitor')
	compile project(':cas-server-core-authentication')
	compile project(':cas-server-core-services')
	compile project(':cas-server-core-logout')
	compile project(':cas-server-core-audit')
	compile project(':cas-server-core-logging')
	compile project(':cas-server-core-tickets')
	compile project(':cas-server-core-web')
	compile project(':cas-server-core-validation')
	compile project(':cas-server-core-util')
	compile project(':cas-server-webapp-throttle')
	compile project(':cas-server-webapp-actions')
	compile project(':cas-server-webapp-cookie')
	compile project(':cas-server-webapp-reports')
	compile project(':cas-server-webapp-themes')
	compile project(':cas-server-webapp-validation')
	compile(group: 'org.springframework.security', name: 'spring-security-config', version:'4.0.2.RELEASE') {
		exclude(module: 'commons-logging')
		exclude(module: 'spring-core')
		exclude(module: 'spring-beans')
		exclude(module: 'spring-context')
		exclude(module: 'spring-aop')
		exclude(module: 'spring-expression')
		exclude(module: 'spring-web')
	}
	compile(group: 'org.springframework.security', name: 'spring-security-web', version:'4.0.2.RELEASE') {
		exclude(module: 'spring-core')
		exclude(module: 'spring-beans')
		exclude(module: 'spring-context')
		exclude(module: 'spring-aop')
		exclude(module: 'spring-expression')
		exclude(module: 'spring-web')
	}
	compile group: 'com.lmax', name: 'disruptor', version:'3.3.2'
	runtime group: 'org.springframework', name: 'spring-expression', version:'4.2.1.RELEASE'
	runtime group: 'javax.servlet', name: 'jstl', version:'1.2'
	runtime group: 'taglibs', name: 'standard', version:'1.1.2'
	runtime group: 'org.jasig.cas', name: 'cas-server-security-filter', version:'2.0.4'
	runtime(group: 'com.ryantenney.metrics', name: 'metrics-spring', version:'3.1.2') {
		exclude(module: 'slf4j-api')
		exclude(module: 'spring-core')
		exclude(module: 'spring-beans')
		exclude(module: 'spring-context-support')
		exclude(module: 'spring-aop')
	}
	runtime(group: 'io.dropwizard.metrics', name: 'metrics-jvm', version:'3.1.2') {
		exclude(module: 'slf4j-api')
	}
	runtime(group: 'io.dropwizard.metrics', name: 'metrics-servlets', version:'3.1.2') {
		exclude(module: 'slf4j-api')
	}
	runtime group: 'org.apache.logging.log4j', name: 'log4j-web', version:'2.3'
	runtime(group: 'org.jasig', name: 'spring-webflow-client-repo', version:'1.0.0') {
		exclude(module: 'log4j')
		exclude(module: 'slf4j-api')
		exclude(module: 'slf4j-log4j12')
	}
	runtime group: 'com.mchange', name: 'c3p0', version:'0.9.5.1'
}

task packageTests(type: Jar) {
	from sourceSets.test.output
	classifier = 'tests'
}
artifacts.archives packageTests

